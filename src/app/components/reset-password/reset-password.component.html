<!-- üìå Ajouter dans index.html (si ce n'est pas d√©j√† fait) -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

<div class="reset-container">
  <div class="icon-header">
    <i class="material-icons lock-icon">lock</i>
  <h2>R√©initialisation du mot de passe</h2>
  </div>

  <p *ngIf="message" class="message">{{ message }}</p>
  <p *ngIf="erreur" class="error">{{ erreur }}</p>

  <!-- √âtape 1 : saisir email -->
  <form *ngIf="etape === 1" (ngSubmit)="envoyerCode()">
    <input #emailInput type="email" [(ngModel)]="email" name="email" required />
    <button type="submit">Envoyer le code</button>
  </form>

  <!-- √âtape 2 : saisir code OTP -->
  <form *ngIf="etape === 2" (ngSubmit)="verifierCode()" class="otp-form">
    <label>Entrez le code re√ßu :</label>
    <div class="otp-container">
      <input type="text" maxlength="1" [(ngModel)]="code[0]" name="code0" #otp0 (input)="onInput($event, 0)" />
      <input type="text" maxlength="1" [(ngModel)]="code[1]" name="code1" #otp1 (input)="onInput($event, 1)" />
      <input type="text" maxlength="1" [(ngModel)]="code[2]" name="code2" #otp2 (input)="onInput($event, 2)" />
      <input type="text" maxlength="1" [(ngModel)]="code[3]" name="code3" #otp3 (input)="onInput($event, 3)" />
      <input type="text" maxlength="1" [(ngModel)]="code[4]" name="code4" #otp4 (input)="onInput($event, 4)" />
      <input type="text" maxlength="1" [(ngModel)]="code[5]" name="code5" #otp5 (input)="onInput($event, 5)" />
    </div>
    <button type="submit">V√©rifier le code</button>
  </form>

  <!-- √âtape 3 : saisir nouveau mot de passe -->
  <form *ngIf="etape === 3" (ngSubmit)="resetPassword()">
    <label>Nouveau mot de passe :</label>
    <input type="password" [(ngModel)]="nouveauMotDePasse" name="nouveauMotDePasse" required />
    <label>Confirmer le mot de passe :</label>
    <input type="password" [(ngModel)]="confirmMotDePasse" name="confirmMotDePasse" required />
    <button type="submit">R√©initialiser le mot de passe</button>
  </form>

  <!-- √âtape 4 : mot de passe chang√© -->
  <div *ngIf="etape === 4" class="success-dialog">
    <div class="success-icon">‚úîÔ∏è</div>
    <h3>Mot de passe modifi√© !</h3>
    <p>Votre mot de passe a √©t√© chang√© avec succ√®s.</p>
    <button (click)="redirectToLogin()">Retour √† la connexion</button>
  </div>
</div>

<style>
/* Material Icon */
.lock-icon {
  font-size: 48px;
  color: #e74c3c;
  display: block;
  margin: auto;
  margin-bottom: 16px;
}

.icon-header {
  text-align: center;
}

.success-dialog {
  text-align: center;
  padding: 40px 20px;
  border-radius: 16px;
  background-color: #fff;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  animation: fadeIn 0.5s ease-in-out;
}

.success-icon {
  font-size: 40px;
  color: #28a745;
  margin-bottom: 20px;
}

.success-dialog h3 {
  font-size: 20px;
  color: #1A1C3A;
  margin-bottom: 10px;
}

.success-dialog p {
  color: #555;
  font-size: 15px;
  margin-bottom: 30px;
}

.success-dialog button {
  padding: 12px 24px;
  font-size: 16px;
  background-color: #3b82f6;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.3s background-color;
}

.success-dialog button:hover {
  background-color: #2563eb;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.otp-container {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 12px;
}

.otp-container input {
  width: 50px;
  height: 60px;
  text-align: center;
  font-size: 24px;
  border: 2px solid #ccc;
  border-radius: 10px;
  transition: 0.3s;
}

.otp-container input:focus {
  border-color: #7F3FBF;
  outline: none;
  box-shadow: 0 0 5px rgba(127, 63, 191, 0.3);
}

.reset-container {
  background-color: white;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  padding: 40px 30px;
  width: 100%;
  max-width: 550px;
  margin: auto;
  z-index: 2;
  position: relative;
  animation: fadeIn 0.8s ease-in-out;
  font-family: 'Segoe UI', sans-serif;
}

.reset-container h2 {
  text-align: center;
  color: #1A1C3A;
  margin-bottom: 24px;
  font-family: 'Playfair Display', serif;
  font-weight: 600;
  font-size: 26px;
}

.reset-container form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.reset-container input[type="email"],
.reset-container input[type="text"],
.reset-container input[type="password"] {
  padding: 14px;
  border: 1px solid #ccc;
  border-radius: 10px;
  font-size: 16px;
  transition: 0.3s border-color;
}

.reset-container input:focus {
  border-color: #7F3FBF;
  outline: none;
}

.reset-container label {
  font-weight: 600;
  color: #1A1C3A;
}

.reset-container button {
  margin-top: 10px;
  padding: 12px;
  font-weight: bold;
  font-size: 16px;
  background: linear-gradient(to right, #7F3FBF, #FF5F6D);
  color: white;
  border: none;
  border-radius: 30px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.reset-container button:hover {
  background-color: #b13d87;
}

.reset-container .message {
  background-color: #eafaf1;
  color: #2ecc71;
  padding: 10px;
  border-radius: 8px;
  text-align: center;
  font-weight: 500;
  border: 1px solid #2ecc71;
}

.reset-container .error {
  background-color: #fdecea;
  color: #e74c3c;
  padding: 10px;
  border-radius: 8px;
  text-align: center;
  font-weight: 500;
  border: 1px solid #e74c3c;
}




.reset-container a {
  display: block;
  margin-top: 20px;
  text-align: center;
  color: #FF5F6D;
  font-weight: 500;
  text-decoration: none;
}

.reset-container a:hover {
  text-decoration: underline;
}

@media (max-width: 768px) {
  .reset-container {
    padding: 30px 20px;
    max-width: 90%;
  }
}
</style>